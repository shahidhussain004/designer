# AWS Configuration for Designer Marketplace
# ===========================================
# This configuration file demonstrates AWS infrastructure setup
# for learning purposes. Adapt for production environments.

# ==============================================================================
# GENERAL AWS SETTINGS
# ==============================================================================

# AWS Region Configuration
AWS_DEFAULT_REGION=us-east-1
AWS_REGION=us-east-1
AWS_AVAILABILITY_ZONES=us-east-1a,us-east-1b,us-east-1c

# Account Configuration (replace with your account)
AWS_ACCOUNT_ID=123456789012

# ==============================================================================
# VPC CONFIGURATION
# ==============================================================================

# VPC CIDR Block
VPC_CIDR=10.0.0.0/16

# Public Subnets (for load balancers, NAT gateways)
PUBLIC_SUBNET_1_CIDR=10.0.1.0/24
PUBLIC_SUBNET_2_CIDR=10.0.2.0/24
PUBLIC_SUBNET_3_CIDR=10.0.3.0/24

# Private Subnets (for application servers)
PRIVATE_SUBNET_1_CIDR=10.0.11.0/24
PRIVATE_SUBNET_2_CIDR=10.0.12.0/24
PRIVATE_SUBNET_3_CIDR=10.0.13.0/24

# Database Subnets (isolated)
DB_SUBNET_1_CIDR=10.0.21.0/24
DB_SUBNET_2_CIDR=10.0.22.0/24
DB_SUBNET_3_CIDR=10.0.23.0/24

# ==============================================================================
# ECS (ELASTIC CONTAINER SERVICE) CONFIGURATION
# ==============================================================================

# Cluster Configuration
ECS_CLUSTER_NAME=designer-marketplace-cluster
ECS_CAPACITY_PROVIDER=FARGATE

# Service Configuration
ECS_SERVICE_MARKETPLACE=marketplace-service
ECS_SERVICE_MESSAGING=messaging-service

# Task Definition Settings
ECS_TASK_CPU=256
ECS_TASK_MEMORY=512
ECS_TASK_DESIRED_COUNT=2
ECS_TASK_MIN_COUNT=1
ECS_TASK_MAX_COUNT=10

# Container Configuration
ECR_REPOSITORY_URL=123456789012.dkr.ecr.us-east-1.amazonaws.com
ECR_MARKETPLACE_IMAGE=designer-marketplace/marketplace-service
ECR_MESSAGING_IMAGE=designer-marketplace/messaging-service

# ==============================================================================
# RDS (RELATIONAL DATABASE SERVICE) CONFIGURATION
# ==============================================================================

# PostgreSQL Configuration
RDS_ENGINE=postgres
RDS_ENGINE_VERSION=15.4
RDS_INSTANCE_CLASS=db.t3.medium
RDS_ALLOCATED_STORAGE=20
RDS_MAX_ALLOCATED_STORAGE=100
RDS_STORAGE_TYPE=gp3
RDS_MULTI_AZ=true

# Database Identifiers
RDS_IDENTIFIER=designer-marketplace-db
RDS_DATABASE_NAME=designer_marketplace
RDS_PORT=5432

# Backup Configuration
RDS_BACKUP_RETENTION_PERIOD=7
RDS_BACKUP_WINDOW=03:00-04:00
RDS_MAINTENANCE_WINDOW=Mon:04:00-Mon:05:00

# ==============================================================================
# ELASTICACHE (REDIS) CONFIGURATION
# ==============================================================================

# Redis Configuration
ELASTICACHE_ENGINE=redis
ELASTICACHE_ENGINE_VERSION=7.0
ELASTICACHE_NODE_TYPE=cache.t3.micro
ELASTICACHE_NUM_CACHE_NODES=2
ELASTICACHE_PORT=6379

# Cluster Mode
ELASTICACHE_CLUSTER_ID=designer-marketplace-redis
ELASTICACHE_REPLICATION_GROUP_ID=designer-marketplace-redis-rg

# ==============================================================================
# APPLICATION LOAD BALANCER CONFIGURATION
# ==============================================================================

# ALB Settings
ALB_NAME=designer-marketplace-alb
ALB_SCHEME=internet-facing
ALB_TYPE=application

# Target Group Settings
TARGET_GROUP_PORT=3000
TARGET_GROUP_PROTOCOL=HTTP
TARGET_GROUP_HEALTH_CHECK_PATH=/health
TARGET_GROUP_HEALTH_CHECK_INTERVAL=30
TARGET_GROUP_HEALTHY_THRESHOLD=2
TARGET_GROUP_UNHEALTHY_THRESHOLD=5

# ==============================================================================
# S3 CONFIGURATION
# ==============================================================================

# Bucket Names (must be globally unique)
S3_ASSETS_BUCKET=designer-marketplace-assets-{unique-suffix}
S3_UPLOADS_BUCKET=designer-marketplace-uploads-{unique-suffix}
S3_LOGS_BUCKET=designer-marketplace-logs-{unique-suffix}

# Bucket Settings
S3_VERSIONING=true
S3_ENCRYPTION=AES256
S3_LIFECYCLE_TRANSITION_DAYS=30
S3_LIFECYCLE_EXPIRATION_DAYS=90

# CloudFront Distribution
CLOUDFRONT_ENABLED=true
CLOUDFRONT_PRICE_CLASS=PriceClass_100

# ==============================================================================
# SQS / SNS CONFIGURATION
# ==============================================================================

# SQS Queues
SQS_MAIN_QUEUE=designer-marketplace-main-queue
SQS_DLQ=designer-marketplace-dlq
SQS_VISIBILITY_TIMEOUT=300
SQS_MESSAGE_RETENTION=1209600
SQS_MAX_RECEIVE_COUNT=3

# SNS Topics
SNS_NOTIFICATIONS_TOPIC=designer-marketplace-notifications
SNS_ALERTS_TOPIC=designer-marketplace-alerts

# ==============================================================================
# COGNITO CONFIGURATION
# ==============================================================================

# User Pool Settings
COGNITO_USER_POOL_NAME=designer-marketplace-users
COGNITO_MFA_CONFIGURATION=OPTIONAL
COGNITO_PASSWORD_MIN_LENGTH=8
COGNITO_PASSWORD_REQUIRE_UPPERCASE=true
COGNITO_PASSWORD_REQUIRE_LOWERCASE=true
COGNITO_PASSWORD_REQUIRE_NUMBERS=true
COGNITO_PASSWORD_REQUIRE_SYMBOLS=true

# App Client Settings
COGNITO_APP_CLIENT_NAME=designer-marketplace-web
COGNITO_CALLBACK_URLS=http://localhost:3000/callback,https://marketplace.example.com/callback
COGNITO_LOGOUT_URLS=http://localhost:3000,https://marketplace.example.com

# ==============================================================================
# CLOUDWATCH CONFIGURATION
# ==============================================================================

# Log Groups
CLOUDWATCH_LOG_GROUP=/ecs/designer-marketplace
CLOUDWATCH_LOG_RETENTION=30

# Alarms
CLOUDWATCH_CPU_ALARM_THRESHOLD=80
CLOUDWATCH_MEMORY_ALARM_THRESHOLD=80
CLOUDWATCH_ERROR_RATE_THRESHOLD=5

# Dashboard
CLOUDWATCH_DASHBOARD_NAME=designer-marketplace-dashboard

# ==============================================================================
# SECRETS MANAGER CONFIGURATION
# ==============================================================================

# Secret Names
SECRETS_DB_CREDENTIALS=designer-marketplace/db-credentials
SECRETS_API_KEYS=designer-marketplace/api-keys
SECRETS_JWT_SECRET=designer-marketplace/jwt-secret

# ==============================================================================
# IAM ROLES & POLICIES
# ==============================================================================

# ECS Task Role
IAM_ECS_TASK_ROLE=designer-marketplace-ecs-task-role
IAM_ECS_EXECUTION_ROLE=designer-marketplace-ecs-execution-role

# Service Roles
IAM_RDS_MONITORING_ROLE=designer-marketplace-rds-monitoring-role

# ==============================================================================
# TAGS (Apply to all resources)
# ==============================================================================

TAG_PROJECT=designer-marketplace
TAG_ENVIRONMENT=development
TAG_OWNER=devops-team
TAG_COST_CENTER=engineering
TAG_MANAGED_BY=terraform
