# Google Cloud Platform Configuration for Designer Marketplace
# =============================================================
# This configuration file demonstrates GCP infrastructure setup
# for learning purposes. Adapt for production environments.

# ==============================================================================
# GENERAL GCP SETTINGS
# ==============================================================================

# Project Configuration
GCP_PROJECT_ID=designer-marketplace-dev
GCP_PROJECT_NUMBER=123456789012
GCP_REGION=us-central1
GCP_ZONE=us-central1-a

# Service Account
GCP_SERVICE_ACCOUNT=designer-marketplace-sa@designer-marketplace-dev.iam.gserviceaccount.com

# ==============================================================================
# CLOUD RUN CONFIGURATION
# ==============================================================================

# Marketplace Service
CLOUD_RUN_MARKETPLACE_NAME=marketplace-service
CLOUD_RUN_MARKETPLACE_IMAGE=gcr.io/designer-marketplace-dev/marketplace-service:latest
CLOUD_RUN_MARKETPLACE_CPU=1
CLOUD_RUN_MARKETPLACE_MEMORY=512Mi
CLOUD_RUN_MARKETPLACE_MIN_INSTANCES=0
CLOUD_RUN_MARKETPLACE_MAX_INSTANCES=100
CLOUD_RUN_MARKETPLACE_CONCURRENCY=80
CLOUD_RUN_MARKETPLACE_PORT=3000
CLOUD_RUN_MARKETPLACE_TIMEOUT=300s

# Messaging Service
CLOUD_RUN_MESSAGING_NAME=messaging-service
CLOUD_RUN_MESSAGING_IMAGE=gcr.io/designer-marketplace-dev/messaging-service:latest
CLOUD_RUN_MESSAGING_CPU=1
CLOUD_RUN_MESSAGING_MEMORY=256Mi
CLOUD_RUN_MESSAGING_MIN_INSTANCES=0
CLOUD_RUN_MESSAGING_MAX_INSTANCES=50
CLOUD_RUN_MESSAGING_CONCURRENCY=80
CLOUD_RUN_MESSAGING_PORT=3001

# Authentication
CLOUD_RUN_INGRESS=all
CLOUD_RUN_ALLOW_UNAUTHENTICATED=true

# ==============================================================================
# GOOGLE KUBERNETES ENGINE (GKE) - Alternative to Cloud Run
# ==============================================================================

GKE_CLUSTER_NAME=designer-marketplace-cluster
GKE_CLUSTER_VERSION=1.28
GKE_NETWORK=designer-marketplace-vpc
GKE_SUBNETWORK=designer-marketplace-subnet

# Node Pool Configuration
GKE_NODE_POOL_NAME=default-pool
GKE_MACHINE_TYPE=e2-standard-2
GKE_DISK_SIZE_GB=100
GKE_DISK_TYPE=pd-standard
GKE_MIN_NODES=1
GKE_MAX_NODES=10
GKE_INITIAL_NODES=3

# Cluster Features
GKE_ENABLE_AUTOPILOT=false
GKE_ENABLE_AUTOSCALING=true
GKE_ENABLE_PRIVATE_NODES=true
GKE_ENABLE_MASTER_AUTHORIZED_NETWORKS=true

# ==============================================================================
# ARTIFACT REGISTRY
# ==============================================================================

ARTIFACT_REGISTRY_LOCATION=us-central1
ARTIFACT_REGISTRY_REPOSITORY=designer-marketplace
ARTIFACT_REGISTRY_FORMAT=DOCKER

# ==============================================================================
# CLOUD SQL (POSTGRESQL)
# ==============================================================================

CLOUD_SQL_INSTANCE_NAME=designer-marketplace-db
CLOUD_SQL_DATABASE_VERSION=POSTGRES_15
CLOUD_SQL_TIER=db-custom-2-4096
CLOUD_SQL_DISK_TYPE=PD_SSD
CLOUD_SQL_DISK_SIZE=20
CLOUD_SQL_DISK_AUTORESIZE=true
CLOUD_SQL_DISK_AUTORESIZE_LIMIT=100

# Database Configuration
CLOUD_SQL_DATABASE_NAME=designer_marketplace
CLOUD_SQL_USER_NAME=dbadmin
# Note: Store password in Secret Manager, not in config files

# Backup Configuration
CLOUD_SQL_BACKUP_ENABLED=true
CLOUD_SQL_BACKUP_START_TIME=03:00
CLOUD_SQL_BACKUP_LOCATION=us
CLOUD_SQL_BACKUP_RETENTION_DAYS=7
CLOUD_SQL_POINT_IN_TIME_RECOVERY=true

# High Availability
CLOUD_SQL_AVAILABILITY_TYPE=ZONAL
CLOUD_SQL_MAINTENANCE_WINDOW_DAY=1
CLOUD_SQL_MAINTENANCE_WINDOW_HOUR=3

# ==============================================================================
# MEMORYSTORE (REDIS)
# ==============================================================================

MEMORYSTORE_INSTANCE_NAME=designer-marketplace-redis
MEMORYSTORE_TIER=BASIC
MEMORYSTORE_MEMORY_SIZE_GB=1
MEMORYSTORE_REDIS_VERSION=REDIS_7_0
MEMORYSTORE_DISPLAY_NAME=Designer Marketplace Redis

# Network Configuration
MEMORYSTORE_CONNECT_MODE=DIRECT_PEERING
MEMORYSTORE_AUTHORIZED_NETWORK=designer-marketplace-vpc

# ==============================================================================
# CLOUD STORAGE
# ==============================================================================

# Bucket Configuration
GCS_ASSETS_BUCKET=designer-marketplace-assets-dev
GCS_UPLOADS_BUCKET=designer-marketplace-uploads-dev
GCS_BACKUPS_BUCKET=designer-marketplace-backups-dev

# Bucket Settings
GCS_LOCATION=US
GCS_STORAGE_CLASS=STANDARD
GCS_UNIFORM_BUCKET_LEVEL_ACCESS=true
GCS_VERSIONING=true

# Lifecycle Rules
GCS_LIFECYCLE_DELETE_AGE=90
GCS_LIFECYCLE_NEARLINE_AGE=30

# ==============================================================================
# CLOUD CDN
# ==============================================================================

CDN_BACKEND_BUCKET_NAME=designer-marketplace-cdn-bucket
CDN_ENABLE_CDN=true
CDN_CACHE_MODE=CACHE_ALL_STATIC
CDN_DEFAULT_TTL=3600
CDN_MAX_TTL=86400
CDN_CLIENT_TTL=3600

# ==============================================================================
# PUB/SUB
# ==============================================================================

# Topics
PUBSUB_TOPIC_NOTIFICATIONS=notifications-topic
PUBSUB_TOPIC_ORDERS=orders-topic
PUBSUB_TOPIC_EVENTS=events-topic

# Subscriptions
PUBSUB_SUB_NOTIFICATIONS=notifications-subscription
PUBSUB_SUB_ORDERS=orders-subscription
PUBSUB_SUB_EVENTS=events-subscription

# Subscription Settings
PUBSUB_ACK_DEADLINE=60
PUBSUB_MESSAGE_RETENTION=604800s
PUBSUB_RETAIN_ACKED=false
PUBSUB_ENABLE_MESSAGE_ORDERING=false

# Dead Letter Topic
PUBSUB_DLT_TOPIC=dead-letter-topic
PUBSUB_MAX_DELIVERY_ATTEMPTS=5

# ==============================================================================
# SECRET MANAGER
# ==============================================================================

SECRET_DB_PASSWORD=db-password
SECRET_JWT_SECRET=jwt-secret
SECRET_API_KEYS=api-keys
SECRET_REDIS_AUTH_STRING=redis-auth

# ==============================================================================
# FIREBASE AUTHENTICATION (Alternative)
# ==============================================================================

FIREBASE_PROJECT_ID=designer-marketplace-dev
FIREBASE_WEB_API_KEY=AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
FIREBASE_AUTH_DOMAIN=designer-marketplace-dev.firebaseapp.com

# ==============================================================================
# IDENTITY PLATFORM
# ==============================================================================

IDENTITY_PLATFORM_ENABLE_EMAIL_SIGNIN=true
IDENTITY_PLATFORM_ENABLE_GOOGLE_SIGNIN=true
IDENTITY_PLATFORM_ENABLE_PHONE_SIGNIN=false
IDENTITY_PLATFORM_ENABLE_ANONYMOUS_USERS=false

# ==============================================================================
# CLOUD MONITORING & LOGGING
# ==============================================================================

# Logging
LOGGING_SINK_NAME=designer-marketplace-logs
LOGGING_RETENTION_DAYS=30

# Monitoring
MONITORING_NOTIFICATION_CHANNEL_EMAIL=alerts@example.com
MONITORING_NOTIFICATION_CHANNEL_SLACK=https://hooks.slack.com/services/XXX

# Alert Policies
ALERT_CPU_THRESHOLD=80
ALERT_MEMORY_THRESHOLD=80
ALERT_LATENCY_THRESHOLD=5s
ALERT_ERROR_RATE_THRESHOLD=0.05

# Uptime Checks
UPTIME_CHECK_PERIOD=60s
UPTIME_CHECK_TIMEOUT=10s

# ==============================================================================
# CLOUD ARMOR (WAF)
# ==============================================================================

CLOUD_ARMOR_POLICY_NAME=designer-marketplace-waf
CLOUD_ARMOR_ENABLE_LOGGING=true

# Security Rules
CLOUD_ARMOR_RULE_SQLI=evaluatePreconfiguredExpr('sqli-v33-stable')
CLOUD_ARMOR_RULE_XSS=evaluatePreconfiguredExpr('xss-v33-stable')
CLOUD_ARMOR_RATE_LIMIT_THRESHOLD=1000
CLOUD_ARMOR_RATE_LIMIT_PERIOD=60

# ==============================================================================
# LOAD BALANCER
# ==============================================================================

LB_NAME=designer-marketplace-lb
LB_SCHEME=EXTERNAL
LB_PROTOCOL=HTTPS
LB_PORT=443
LB_SSL_POLICY=MODERN

# Health Check
LB_HEALTH_CHECK_PATH=/health
LB_HEALTH_CHECK_INTERVAL=30s
LB_HEALTH_CHECK_TIMEOUT=10s
LB_HEALTHY_THRESHOLD=2
LB_UNHEALTHY_THRESHOLD=5

# ==============================================================================
# VPC NETWORK
# ==============================================================================

VPC_NAME=designer-marketplace-vpc
VPC_AUTO_CREATE_SUBNETWORKS=false
VPC_ROUTING_MODE=REGIONAL

SUBNET_NAME=designer-marketplace-subnet
SUBNET_IP_RANGE=10.0.0.0/20
SUBNET_PRIVATE_IP_GOOGLE_ACCESS=true

# Cloud NAT
NAT_NAME=designer-marketplace-nat
NAT_ROUTER_NAME=designer-marketplace-router

# ==============================================================================
# LABELS (Apply to all resources)
# ==============================================================================

LABEL_ENVIRONMENT=development
LABEL_PROJECT=designer-marketplace
LABEL_TEAM=engineering
LABEL_COST_CENTER=development
LABEL_MANAGED_BY=terraform
