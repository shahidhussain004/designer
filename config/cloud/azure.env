# Azure Configuration for Designer Marketplace
# =============================================
# This configuration file demonstrates Azure infrastructure setup
# for learning purposes. Adapt for production environments.

# ==============================================================================
# GENERAL AZURE SETTINGS
# ==============================================================================

# Subscription & Tenant
AZURE_SUBSCRIPTION_ID=00000000-0000-0000-0000-000000000000
AZURE_TENANT_ID=00000000-0000-0000-0000-000000000000

# Resource Group & Location
AZURE_RESOURCE_GROUP=rg-designer-marketplace
AZURE_LOCATION=eastus
AZURE_LOCATION_SECONDARY=westus2

# Environment Tags
AZURE_ENVIRONMENT=development
AZURE_PROJECT_NAME=designer-marketplace

# ==============================================================================
# AZURE CONTAINER APPS CONFIGURATION
# ==============================================================================

# Container Apps Environment
CONTAINER_APPS_ENV_NAME=cae-designer-marketplace
CONTAINER_APPS_LOG_ANALYTICS_WORKSPACE=log-designer-marketplace

# Marketplace Service
CONTAINER_APP_MARKETPLACE_NAME=ca-marketplace-service
CONTAINER_APP_MARKETPLACE_IMAGE=acrdesignermarketplace.azurecr.io/marketplace-service:latest
CONTAINER_APP_MARKETPLACE_CPU=0.5
CONTAINER_APP_MARKETPLACE_MEMORY=1.0Gi
CONTAINER_APP_MARKETPLACE_MIN_REPLICAS=1
CONTAINER_APP_MARKETPLACE_MAX_REPLICAS=10
CONTAINER_APP_MARKETPLACE_PORT=3000

# Messaging Service
CONTAINER_APP_MESSAGING_NAME=ca-messaging-service
CONTAINER_APP_MESSAGING_IMAGE=acrdesignermarketplace.azurecr.io/messaging-service:latest
CONTAINER_APP_MESSAGING_CPU=0.25
CONTAINER_APP_MESSAGING_MEMORY=0.5Gi
CONTAINER_APP_MESSAGING_MIN_REPLICAS=1
CONTAINER_APP_MESSAGING_MAX_REPLICAS=5
CONTAINER_APP_MESSAGING_PORT=3001

# ==============================================================================
# AZURE CONTAINER REGISTRY (ACR)
# ==============================================================================

ACR_NAME=acrdesignermarketplace
ACR_SKU=Standard
ACR_ADMIN_ENABLED=true
ACR_RETENTION_DAYS=30

# ==============================================================================
# AZURE DATABASE FOR POSTGRESQL
# ==============================================================================

# Flexible Server Configuration
POSTGRES_SERVER_NAME=psql-designer-marketplace
POSTGRES_SKU=Standard_B2s
POSTGRES_STORAGE_SIZE_GB=32
POSTGRES_VERSION=15
POSTGRES_BACKUP_RETENTION_DAYS=7
POSTGRES_GEO_REDUNDANT_BACKUP=false
POSTGRES_HIGH_AVAILABILITY_MODE=Disabled

# Database Configuration
POSTGRES_DATABASE_NAME=designer_marketplace
POSTGRES_ADMIN_USERNAME=dbadmin
# Note: Store password in Azure Key Vault, not in config files
POSTGRES_PORT=5432

# Firewall Rules
POSTGRES_ALLOW_AZURE_IPS=true
POSTGRES_ALLOW_ALL_IPS=false

# ==============================================================================
# AZURE CACHE FOR REDIS
# ==============================================================================

REDIS_CACHE_NAME=redis-designer-marketplace
REDIS_SKU=Basic
REDIS_CAPACITY=0
REDIS_FAMILY=C
REDIS_VERSION=6
REDIS_NON_SSL_PORT_ENABLED=false
REDIS_MINIMUM_TLS_VERSION=1.2

# ==============================================================================
# AZURE SERVICE BUS
# ==============================================================================

SERVICE_BUS_NAMESPACE=sb-designer-marketplace
SERVICE_BUS_SKU=Standard

# Queues
SERVICE_BUS_QUEUE_NOTIFICATIONS=notifications-queue
SERVICE_BUS_QUEUE_ORDERS=orders-queue
SERVICE_BUS_QUEUE_MESSAGES=messages-queue

# Topics
SERVICE_BUS_TOPIC_EVENTS=events-topic
SERVICE_BUS_TOPIC_BROADCASTS=broadcasts-topic

# Queue Settings
SERVICE_BUS_MAX_SIZE_MB=1024
SERVICE_BUS_DEFAULT_TTL=P14D
SERVICE_BUS_LOCK_DURATION=PT1M
SERVICE_BUS_MAX_DELIVERY_COUNT=10

# ==============================================================================
# AZURE STORAGE ACCOUNT
# ==============================================================================

STORAGE_ACCOUNT_NAME=stdesignermarketplace
STORAGE_ACCOUNT_SKU=Standard_LRS
STORAGE_ACCOUNT_KIND=StorageV2
STORAGE_ACCOUNT_ACCESS_TIER=Hot
STORAGE_ACCOUNT_HTTPS_ONLY=true
STORAGE_ACCOUNT_MIN_TLS_VERSION=TLS1_2

# Blob Containers
BLOB_CONTAINER_ASSETS=assets
BLOB_CONTAINER_UPLOADS=uploads
BLOB_CONTAINER_BACKUPS=backups

# ==============================================================================
# AZURE CDN
# ==============================================================================

CDN_PROFILE_NAME=cdn-designer-marketplace
CDN_SKU=Standard_Microsoft
CDN_ENDPOINT_NAME=designer-marketplace-cdn
CDN_ORIGIN_HOST=stdesignermarketplace.blob.core.windows.net

# ==============================================================================
# AZURE KEY VAULT
# ==============================================================================

KEY_VAULT_NAME=kv-designer-marketplace
KEY_VAULT_SKU=standard
KEY_VAULT_SOFT_DELETE_RETENTION=7
KEY_VAULT_PURGE_PROTECTION=false

# Secret Names
SECRET_DB_PASSWORD=db-password
SECRET_JWT_SECRET=jwt-secret
SECRET_API_KEYS=api-keys
SECRET_REDIS_KEY=redis-primary-key

# ==============================================================================
# AZURE ACTIVE DIRECTORY B2C
# ==============================================================================

AAD_B2C_TENANT=designermarketplace
AAD_B2C_DOMAIN=designermarketplace.onmicrosoft.com
AAD_B2C_CLIENT_ID=00000000-0000-0000-0000-000000000000

# User Flows
AAD_B2C_SIGNUP_SIGNIN_POLICY=B2C_1_SignUpSignIn
AAD_B2C_PASSWORD_RESET_POLICY=B2C_1_PasswordReset
AAD_B2C_EDIT_PROFILE_POLICY=B2C_1_EditProfile

# ==============================================================================
# AZURE MONITOR & APPLICATION INSIGHTS
# ==============================================================================

APP_INSIGHTS_NAME=appi-designer-marketplace
APP_INSIGHTS_TYPE=web
LOG_ANALYTICS_WORKSPACE_NAME=log-designer-marketplace
LOG_ANALYTICS_SKU=PerGB2018
LOG_ANALYTICS_RETENTION_DAYS=30

# Alert Rules
ALERT_CPU_THRESHOLD=80
ALERT_MEMORY_THRESHOLD=80
ALERT_RESPONSE_TIME_THRESHOLD=5000
ALERT_ERROR_RATE_THRESHOLD=5

# ==============================================================================
# AZURE FRONT DOOR
# ==============================================================================

FRONT_DOOR_NAME=fd-designer-marketplace
FRONT_DOOR_SKU=Standard_AzureFrontDoor
FRONT_DOOR_WAF_MODE=Prevention

# ==============================================================================
# VIRTUAL NETWORK (Optional for private endpoints)
# ==============================================================================

VNET_NAME=vnet-designer-marketplace
VNET_ADDRESS_SPACE=10.0.0.0/16

SUBNET_APPS_NAME=snet-apps
SUBNET_APPS_ADDRESS=10.0.1.0/24

SUBNET_DB_NAME=snet-database
SUBNET_DB_ADDRESS=10.0.2.0/24

SUBNET_CACHE_NAME=snet-cache
SUBNET_CACHE_ADDRESS=10.0.3.0/24

# ==============================================================================
# RESOURCE TAGS
# ==============================================================================

TAG_ENVIRONMENT=development
TAG_PROJECT=designer-marketplace
TAG_OWNER=devops-team
TAG_COST_CENTER=engineering
TAG_MANAGED_BY=terraform
